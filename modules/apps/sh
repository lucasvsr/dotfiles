#! /usr/bin/env bash

source "$SCRIPTS"/utils
source "$SCRIPTS"/manager

APPS="$DOTFILES/modules/apps/list"

spinner "Atualizando o sistema" -- sudo pacman -Syu
spinner "Iniciando a instalação dos pacotes via Pacman" -- sleep 1

while IFS=$'\n' read -r package; do

    package=$(echo $package | sed -e "s| ||g")

    if is_not_installed "$package" 
    then

        spinner "Instalando o $package" -- sudo pacman -Sy --needed --noconfirm "$package"

    elif exists "$package" || ! is_not_installed "$package"
    then
        
        warn "$package já instalado"
        
    fi

done <"$APPS"
